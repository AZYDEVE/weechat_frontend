(this.webpackJsonpweechat_front=this.webpackJsonpweechat_front||[]).push([[0],{111:function(e,n,t){},113:function(e,n,t){},114:function(e,n,t){},115:function(e,n,t){},118:function(e,n,t){"use strict";t.r(n);var c=t(1),a=t(12),s=t.n(a),l=(t(56),t(57),t(7)),r=t.n(l),o=t(13),i=t(20),u=t(9),d=t(2),b=function(e){var n=e.selectChatRoom,t=e.stylings,c=e.chatRoom,a=e.activeChatRoom;return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{style:c.Id===a?(t.backgroundColor="#ECECEC",t):t,onClick:function(){n(c.Id)},children:Object(d.jsx)("div",{style:{display:"flex",width:"100%",height:"100%",flexDirection:"row",justifyContent:"center",alignItems:"center",cursor:"pointer"},children:c.name})})})},m=t(45),h=(t(60),t(61),t(15)),p=t.n(h),Z=function(){var e=Object(o.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",url:"https://".concat("dev-nxvznaad.us.auth0.com","/api/v2/users"),params:{search_engine:"v3"},headers:{authorization:"Bearer ".concat("eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjVYcFk1bFlZa1NZME1NYWdQNE9TbyJ9.eyJpc3MiOiJodHRwczovL2Rldi1ueHZ6bmFhZC51cy5hdXRoMC5jb20vIiwic3ViIjoiVTN2Mzk4R1dXcUp2VHJCRGIyQXlVOXV4RGw2VjlzWllAY2xpZW50cyIsImF1ZCI6Imh0dHBzOi8vZGV2LW54dnpuYWFkLnVzLmF1dGgwLmNvbS9hcGkvdjIvIiwiaWF0IjoxNjM4OTExNzg4LCJleHAiOjE2Mzk3NzU3ODgsImF6cCI6IlUzdjM5OEdXV3FKdlRyQkRiMkF5VTl1eERsNlY5c1pZIiwic2NvcGUiOiJyZWFkOmNsaWVudF9ncmFudHMgY3JlYXRlOmNsaWVudF9ncmFudHMgZGVsZXRlOmNsaWVudF9ncmFudHMgdXBkYXRlOmNsaWVudF9ncmFudHMgcmVhZDp1c2VycyB1cGRhdGU6dXNlcnMgZGVsZXRlOnVzZXJzIGNyZWF0ZTp1c2VycyByZWFkOnVzZXJzX2FwcF9tZXRhZGF0YSB1cGRhdGU6dXNlcnNfYXBwX21ldGFkYXRhIGRlbGV0ZTp1c2Vyc19hcHBfbWV0YWRhdGEgY3JlYXRlOnVzZXJzX2FwcF9tZXRhZGF0YSByZWFkOnVzZXJfY3VzdG9tX2Jsb2NrcyBjcmVhdGU6dXNlcl9jdXN0b21fYmxvY2tzIGRlbGV0ZTp1c2VyX2N1c3RvbV9ibG9ja3MgY3JlYXRlOnVzZXJfdGlja2V0cyByZWFkOmNsaWVudHMgdXBkYXRlOmNsaWVudHMgZGVsZXRlOmNsaWVudHMgY3JlYXRlOmNsaWVudHMgcmVhZDpjbGllbnRfa2V5cyB1cGRhdGU6Y2xpZW50X2tleXMgZGVsZXRlOmNsaWVudF9rZXlzIGNyZWF0ZTpjbGllbnRfa2V5cyByZWFkOmNvbm5lY3Rpb25zIHVwZGF0ZTpjb25uZWN0aW9ucyBkZWxldGU6Y29ubmVjdGlvbnMgY3JlYXRlOmNvbm5lY3Rpb25zIHJlYWQ6cmVzb3VyY2Vfc2VydmVycyB1cGRhdGU6cmVzb3VyY2Vfc2VydmVycyBkZWxldGU6cmVzb3VyY2Vfc2VydmVycyBjcmVhdGU6cmVzb3VyY2Vfc2VydmVycyByZWFkOmRldmljZV9jcmVkZW50aWFscyB1cGRhdGU6ZGV2aWNlX2NyZWRlbnRpYWxzIGRlbGV0ZTpkZXZpY2VfY3JlZGVudGlhbHMgY3JlYXRlOmRldmljZV9jcmVkZW50aWFscyByZWFkOnJ1bGVzIHVwZGF0ZTpydWxlcyBkZWxldGU6cnVsZXMgY3JlYXRlOnJ1bGVzIHJlYWQ6cnVsZXNfY29uZmlncyB1cGRhdGU6cnVsZXNfY29uZmlncyBkZWxldGU6cnVsZXNfY29uZmlncyByZWFkOmhvb2tzIHVwZGF0ZTpob29rcyBkZWxldGU6aG9va3MgY3JlYXRlOmhvb2tzIHJlYWQ6YWN0aW9ucyB1cGRhdGU6YWN0aW9ucyBkZWxldGU6YWN0aW9ucyBjcmVhdGU6YWN0aW9ucyByZWFkOmVtYWlsX3Byb3ZpZGVyIHVwZGF0ZTplbWFpbF9wcm92aWRlciBkZWxldGU6ZW1haWxfcHJvdmlkZXIgY3JlYXRlOmVtYWlsX3Byb3ZpZGVyIGJsYWNrbGlzdDp0b2tlbnMgcmVhZDpzdGF0cyByZWFkOmluc2lnaHRzIHJlYWQ6dGVuYW50X3NldHRpbmdzIHVwZGF0ZTp0ZW5hbnRfc2V0dGluZ3MgcmVhZDpsb2dzIHJlYWQ6bG9nc191c2VycyByZWFkOnNoaWVsZHMgY3JlYXRlOnNoaWVsZHMgdXBkYXRlOnNoaWVsZHMgZGVsZXRlOnNoaWVsZHMgcmVhZDphbm9tYWx5X2Jsb2NrcyBkZWxldGU6YW5vbWFseV9ibG9ja3MgdXBkYXRlOnRyaWdnZXJzIHJlYWQ6dHJpZ2dlcnMgcmVhZDpncmFudHMgZGVsZXRlOmdyYW50cyByZWFkOmd1YXJkaWFuX2ZhY3RvcnMgdXBkYXRlOmd1YXJkaWFuX2ZhY3RvcnMgcmVhZDpndWFyZGlhbl9lbnJvbGxtZW50cyBkZWxldGU6Z3VhcmRpYW5fZW5yb2xsbWVudHMgY3JlYXRlOmd1YXJkaWFuX2Vucm9sbG1lbnRfdGlja2V0cyByZWFkOnVzZXJfaWRwX3Rva2VucyBjcmVhdGU6cGFzc3dvcmRzX2NoZWNraW5nX2pvYiBkZWxldGU6cGFzc3dvcmRzX2NoZWNraW5nX2pvYiByZWFkOmN1c3RvbV9kb21haW5zIGRlbGV0ZTpjdXN0b21fZG9tYWlucyBjcmVhdGU6Y3VzdG9tX2RvbWFpbnMgdXBkYXRlOmN1c3RvbV9kb21haW5zIHJlYWQ6ZW1haWxfdGVtcGxhdGVzIGNyZWF0ZTplbWFpbF90ZW1wbGF0ZXMgdXBkYXRlOmVtYWlsX3RlbXBsYXRlcyByZWFkOm1mYV9wb2xpY2llcyB1cGRhdGU6bWZhX3BvbGljaWVzIHJlYWQ6cm9sZXMgY3JlYXRlOnJvbGVzIGRlbGV0ZTpyb2xlcyB1cGRhdGU6cm9sZXMgcmVhZDpwcm9tcHRzIHVwZGF0ZTpwcm9tcHRzIHJlYWQ6YnJhbmRpbmcgdXBkYXRlOmJyYW5kaW5nIGRlbGV0ZTpicmFuZGluZyByZWFkOmxvZ19zdHJlYW1zIGNyZWF0ZTpsb2dfc3RyZWFtcyBkZWxldGU6bG9nX3N0cmVhbXMgdXBkYXRlOmxvZ19zdHJlYW1zIGNyZWF0ZTpzaWduaW5nX2tleXMgcmVhZDpzaWduaW5nX2tleXMgdXBkYXRlOnNpZ25pbmdfa2V5cyByZWFkOmxpbWl0cyB1cGRhdGU6bGltaXRzIGNyZWF0ZTpyb2xlX21lbWJlcnMgcmVhZDpyb2xlX21lbWJlcnMgZGVsZXRlOnJvbGVfbWVtYmVycyByZWFkOmVudGl0bGVtZW50cyByZWFkOmF0dGFja19wcm90ZWN0aW9uIHVwZGF0ZTphdHRhY2tfcHJvdGVjdGlvbiByZWFkOm9yZ2FuaXphdGlvbnMgdXBkYXRlOm9yZ2FuaXphdGlvbnMgY3JlYXRlOm9yZ2FuaXphdGlvbnMgZGVsZXRlOm9yZ2FuaXphdGlvbnMgY3JlYXRlOm9yZ2FuaXphdGlvbl9tZW1iZXJzIHJlYWQ6b3JnYW5pemF0aW9uX21lbWJlcnMgZGVsZXRlOm9yZ2FuaXphdGlvbl9tZW1iZXJzIGNyZWF0ZTpvcmdhbml6YXRpb25fY29ubmVjdGlvbnMgcmVhZDpvcmdhbml6YXRpb25fY29ubmVjdGlvbnMgdXBkYXRlOm9yZ2FuaXphdGlvbl9jb25uZWN0aW9ucyBkZWxldGU6b3JnYW5pemF0aW9uX2Nvbm5lY3Rpb25zIGNyZWF0ZTpvcmdhbml6YXRpb25fbWVtYmVyX3JvbGVzIHJlYWQ6b3JnYW5pemF0aW9uX21lbWJlcl9yb2xlcyBkZWxldGU6b3JnYW5pemF0aW9uX21lbWJlcl9yb2xlcyBjcmVhdGU6b3JnYW5pemF0aW9uX2ludml0YXRpb25zIHJlYWQ6b3JnYW5pemF0aW9uX2ludml0YXRpb25zIGRlbGV0ZTpvcmdhbml6YXRpb25faW52aXRhdGlvbnMiLCJndHkiOiJjbGllbnQtY3JlZGVudGlhbHMifQ.kLW9jYMeBGHLI_9W7ZYSQF5Wg9O6ej77dSz3JJ2NBilwW5RR6mpvP-qMylgqos7VMnYrdlHZ_V7ggmzqCpB1JKQyVAuLBLRwQUEOy1GMGYJlroKeizs1ATya_N4m8rlft7iOPOucHyFzsLkYnTGTrJoX3pHubQnGPo9I1K5UWKRPc8-0QOa21Fkz4vq_h0SpL7G57Bop4f0fPlNXDwBiU-P9OsNZKjy9WPuFAK_AkVVgiTzT-1Fldas6OiXSMc9ZZRZF4-0W4TapUqqCK7hcUolCBmd9jZpF2IZ4RgYkf2CBxhfNrCHTsAvSGrjQppoc9HuKljNqO7F_MyWnp-IbzQ")}},e.abrupt("return",p.a.request(n).then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=t(51),W=function(e){var n=e.options,t=e.onChange;return console.log(n),Object(d.jsx)("div",{children:Object(d.jsx)(j.a,{isMulti:!0,options:n,placeholder:"select your friends",onChange:t})})},O=t(44),y=t.n(O),f=t(16);var G=function(){var e=Object(f.b)(),n=e.user,t=e.isAuthenticated,a=Object(c.useState)({email:"",user_id:"",nickname:""}),s=Object(u.a)(a,2),l=s[0],r=s[1];return Object(c.useEffect)((function(){t&&function(){var e={email:n.email,user_id:n.sub,nickname:n.nickname};r(e)}()}),[n,t]),l},V="http://localhost:30001";function g(e,n){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(r.a.mark((function e(n,t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.a.post("".concat(V,"/dbms/relationship/add"),{groupName:n,userList:t}).then((function(e){return e})).catch((function(e){console.error(e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return R.apply(this,arguments)}function R(){return(R=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("".concat(V,"/dbms/relationship/list"),{userId:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return x.apply(this,arguments)}function x(){return(x=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.abrupt("return",p.a.post("".concat(V,"/dbms/message/list"),{chatRoomId:n}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.a.post("".concat(V,"/dbms/message/add"),n).then((function(e){return e})).catch((function(e){console.error(e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=function(e){var n=e.open,t=e.onClose,a=(e.createNewChatRoomFunction,G()),s=Object(c.useState)(""),l=Object(u.a)(s,2),i=l[0],b=l[1],m=Object(c.useState)([]),h=Object(u.a)(m,2),p=h[0],j=h[1],O=Object(c.useState)(""),f=Object(u.a)(O,2),V=f[0],v=f[1],X=function(){var e=Object(o.a)(r.a.mark((function e(){var n,t,c,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z();case 2:for(c in n=e.sent,t=[],n)a={label:n[c].email,value:n[c]},t.push(a);b(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){""===i&&X()}),[]);var R=function(){var e=Object(o.a)(r.a.mark((function e(){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(" "!==V&&0!==p.length){e.next=3;break}return y.a.fire({icon:"error",title:"Oops...",text:"Some fields are empty"}),e.abrupt("return");case 3:for(c in(n=[]).push(a.email),p)p[c].label!==a.email&&n.push(p[c].label);g(V,n),t();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n?Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:"create-chat-container",children:Object(d.jsxs)("div",{className:"overlay-container",children:[Object(d.jsx)("textarea",{className:"chatRoomName",placeholder:"Create chatroom name",value:V,onChange:function(e){v(e.target.value),console.log(V)}}),Object(d.jsx)("div",{className:"selection",children:Object(d.jsx)(W,{options:i,onChange:function(e){j(e)}})}),Object(d.jsxs)("div",{className:"btn-container",children:[Object(d.jsx)("div",{className:"btn-close",children:Object(d.jsx)("button",{onClick:t,style:{width:"10vh",height:"5vh"},children:"Close"})}),Object(d.jsx)("div",{className:"btn-create",children:Object(d.jsx)("button",{style:{width:"10vh",height:"5vh"},onClick:R,children:"Create"})})]})]})})}):null},k=function(e){var n,t=e.listOfChatRoom,a=e.selectChatRoom,s=e.activeChatRoom,l=e.createNewChatRoomFunction,r=Object(c.useState)(!1),o=Object(u.a)(r,2),i=o[0],h=o[1];return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"ChatRoomSideBar",children:[Object(d.jsx)(m.a,{size:60,onClick:function(){return h(!0)}}),Object(d.jsx)(N,{open:i,onClose:function(){return h(!1)},createNewChatRoomFunction:l}),(n=t,console.log(t),0!==t.length?n.map((function(e){return Object(d.jsx)(b,{stylings:{height:"60px",width:"70%",backgroundColor:"#CBC7C8",margin:"10px",boarder:"1px black",borderRadius:"8px",boxShadow:"1px 1.5px 3px rgba(0,0,0.18)"},chatRoom:e,selectChatRoom:a,activeChatRoom:s})})):Object(d.jsx)("div",{children:"Loading..."}))]})})},J=t(47),B=(t(111),t(46)),I=t.n(B),z=function(e){var n=e.user,t=e.message,c=e.time,a=e.isCurrentUser;return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:a?"user-msgCard-container":"not-User-msgCard-container",children:Object(d.jsxs)("div",{className:a?"user-message-container":"not-user-message-container",children:[Object(d.jsx)("div",{className:"user",children:n}),Object(d.jsxs)("div",{className:a?"user-messages":"not-user-messages",children:[t,Object(d.jsx)("div",{className:"time",children:I()(c).format("MM-DD hh:mm:ss a")})]})]})})})},C=(t(113),function(e){var n=e.activeChatRoom,t=e.listOfMessages,a=G(),s=Object(c.useState)(""),l=Object(u.a)(s,2),r=l[0],o=l[1];return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"chatRoom",children:[Object(d.jsx)("div",{className:"messageDisplay",children:(console.log(t.length),0!==t.length?t.map((function(e){var n=!1;return e.UserID===a.email&&(n=!0),Object(d.jsx)(z,{user:e.UserID,message:e.message,time:e.timestamp,isCurrentUser:n})})):Object(d.jsx)("div",{children:"Loading.."}))}),Object(d.jsxs)("div",{clasName:"messageInput",children:[Object(d.jsx)("textarea",{name:"MessageInput",className:"messsage_inputbox",value:r,onChange:function(e){o(e.target.value)}}),Object(d.jsx)(J.a,{className:"btn-send pointing",onClick:function(){""!==r?(console.log(a),console.log(n),function(e){F.apply(this,arguments)}({groupId:n,senderId:a.email,message:r}),o("")):console.log("message is empty")},style:""!==r?{color:"green"}:""})]})]})})}),w=function(){var e=new WebSocket("ws://localhost:3001");return e.onopen=function(e){console.log("socket is connected")},e},M=(t(114),function(){var e=w(),n=G(),t=Object(c.useState)([]),a=Object(u.a)(t,2),s=a[0],l=a[1],b=Object(c.useState)(""),m=Object(u.a)(b,2),h=m[0],p=m[1],Z=Object(c.useState)([]),j=Object(u.a)(Z,2),W=j[0],O=j[1];e.onmessage=function(e){var n=JSON.parse(e.data);console.log(n),O((function(e){return[].concat(Object(i.a)(e),[n])}))};var y=function(){var e=Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n.email),e.prev=1,e.next=4,X(n.email);case 4:t=e.sent,l(t.data.datas),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),f=[{name:"chatroom A",Id:"A1"},{name:"chatroom B",Id:"B1"},{name:"chatroom C",Id:"C1"}];Object(c.useEffect)((function(){if(console.log(n),""!==n.email)try{y(f)}catch(e){console.log(e)}}),[n]);var V=function(){var n=Object(o.a)(r.a.mark((function n(t){var c;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(t),p(t),e.send(JSON.stringify({type:"newtopic",body:t})),O([]),n.prev=4,n.next=7,Y(t);case 7:c=n.sent,console.log(c),O(c.data.datas),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(4),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[4,12]])})));return function(e){return n.apply(this,arguments)}}();return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"chatPage_container",children:[Object(d.jsx)(k,{className:"sideBar",listOfChatRoom:s,selectChatRoom:V,activeChatRoom:h,createNewChatRoomFunction:function(e){l([].concat(Object(i.a)(s),[e]))}}),Object(d.jsx)(C,{className:"chatroom",activeChatRoom:h,ws:e,listOfMessages:W})]})})}),H=t(122),U=t(121),T=(t(115),function(){var e=Object(f.b)(),n=e.user,t=e.isAuthenticated,c=e.isLoading,a=e.loginWithRedirect,s=e.logout,l=function(){return t?Object(d.jsx)("button",{onClick:function(){return s({returnTo:window.location.origin})},children:"Log Out"}):Object(d.jsx)("button",{onClick:function(){return a()},children:"Log In/Register"})},r=G(),o=function(){return Object(d.jsx)("button",{onClick:function(){console.log(r.user_id),Z().then((function(e){for(var n=0;n<Object.keys(e).length;n++){var t=e[n];console.log(t.user_id+" "+t.nickname+" "+t.email)}}))},children:"Get All Users"})},i=function(){return c?Object(d.jsx)("div",{children:"Loading ..."}):t&&Object(d.jsx)("div",{children:n.name})};return Object(d.jsx)(H.a,{className:"navbar",bg:"light",sticky:"top",children:Object(d.jsxs)(U.a,{className:"navbarContainer",children:[Object(d.jsx)(H.a.Brand,{className:"brand",children:"WeeChat"}),Object(d.jsxs)("div",{class:"inline",className:"userSection",children:[Object(d.jsx)(i,{}),Object(d.jsx)(l,{}),Object(d.jsx)(o,{})]})]})})});var S=function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(T,{}),Object(d.jsx)(M,{})]})})},Q=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,123)).then((function(n){var t=n.getCLS,c=n.getFID,a=n.getFCP,s=n.getLCP,l=n.getTTFB;t(e),c(e),a(e),s(e),l(e)}))};s.a.render(Object(d.jsx)(f.a,{domain:"dev-nxvznaad.us.auth0.com",clientId:"LRW7PnF24xeTFZhpP8OKGE8uBwZTo3Xg",redirectUri:window.location.origin,children:Object(d.jsx)(S,{})}),document.getElementById("root")),Q()},56:function(e,n,t){},57:function(e,n,t){},60:function(e,n,t){},61:function(e,n,t){}},[[118,1,2]]]);
//# sourceMappingURL=main.07494aa2.chunk.js.map